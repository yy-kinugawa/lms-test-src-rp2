<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jp.co.sss.lms.mapper.MQuestionMapper">

	<select id="findByExamId" resultType="jp.co.sss.lms.entity.MQuestion">
		SELECT * 
		FROM m_question
		WHERE exam_id = #{examId} 
			AND delete_flg = #{deleteFlg}
		ORDER BY question_id
	</select>

	<!-- Task.113 -->
	<insert id="insert" parameterType="jp.co.sss.lms.entity.MQuestion" useGeneratedKeys="true" keyProperty="questionId">
		INSERT INTO m_question
		(
			question,
			grade,
			answer_num,
			choice_1,
			choice_2,
			choice_3,
			choice_4,
			explain,
			exam_id,
			genre_detail_id,
			account_id,
			delete_flg,
			first_create_user,
			first_create_date,
			last_modified_user,
			last_modified_date
		)
		VALUES
		(
			#{question},
			#{grade},
			#{answerNum},
			#{choice1},
			#{choice2},
			#{choice3},
			#{choice4},
			#{explain},
			#{examId},
			#{genreDetailId},
			#{accountId},
			#{deleteFlg},
			#{firstCreateUser},
			#{firstCreateDate},
			#{lastModifiedUser},
			#{lastModifiedDate}
		)
	</insert>

	<!-- Task.113 -->
	<update  id="update" parameterType="jp.co.sss.lms.entity.MQuestion">
		UPDATE m_question
		SET
			question = #{question},
			grade = #{grade},
			answer_num = #{answerNum},
			choice_1 = #{choice1},
			choice_2 = #{choice2},
			choice_3 = #{choice3},
			choice_4 = #{choice4},
			explain = #{explain},
			exam_id = #{examId},
			genre_detail_id = #{genreDetailId},
			last_modified_user = #{lastModifiedUser},
			last_modified_date = #{lastModifiedDate}
		WHERE question_id = #{questionId}
	</update>

</mapper>